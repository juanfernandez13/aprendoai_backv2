generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id          Int          @id @default(autoincrement())
  firstName   String
  lastName    String
  email       String       @unique
  password    String
  dateUpdate  DateTime     @default(now())
  dateCreated DateTime     @default(now())
  collection  Collection[]
}

model Collection {
  id      Int       @id @default(autoincrement())
  userId  Int
  name    String
  
  image   String?   
  
  user    User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  subject Subject[]
}

model Subject {
  id           Int            @id @default(autoincrement())
  collectionId Int
  resume       String         @default("")
  name         String
  
  image        String?        

  conversation Conversation[]
  question     Question[]
  collection   Collection     @relation(fields: [collectionId], references: [id], onDelete: Cascade)
}

model Conversation {
  id          Int      @id @default(autoincrement())
  subjectId   Int
  isGenerated Boolean
  text        String
  createdAt   DateTime @default(now())
  subject     Subject  @relation(fields: [subjectId], references: [id], onDelete: Cascade)
}

model Question {
  id        Int     @id @default(autoincrement())
  subjectId Int
  items     String
  text      String
  subject   Subject @relation(fields: [subjectId], references: [id], onDelete: Cascade)
}